
=== Команды игры ===

Большая часть взаимодействия с игрой Angband происходит с помощью "команд".
Каждая команда, помимо собственно клавиши, может включать количество
повторений, направление или буква предмета. В Angband доступно две
стандартные раскладки - "оригинальная" (специфичная для Angband; управление
цифровыми клавишами) и "rogue-like" (использующаяся во многих других играх и
программах; управление буквами).

Клавиши таких раскладок преобразуются во "внутреннюю" раскладку Angband.
"Оригинальная" раскладка очень похожа на нее, за исключением нескольких
добавлений (например, цифровые клавиши для перемещения). "Rogue-like"
раскладка использует клавиши h/j/k/l/y/u/b/n для перемещения и выбора
направления; она также задействует намного больше клавиш с Shift и Ctrl.

Пользователь может расширить раскладку за счет любых неиспользуемых клавиш,
определяя "карты клавиш". Пользователь может также при необходимости дать
команду напрямую во внутренней раскладке, если она предваряется знаком "\".
Обычно это используется только в макросах. Если какие-то из комбинаций
клавиш с Ctrl перехватываются системой, можно ввести их, набрав
последовательно "^" (обычно Shift+"6") и букву. Например, чтобы нажать
Ctrl+"S", наберите Shift+"6" и "s". (Клавиша "6" - с основной, не с цифровой
клавиатуры.)

Многие команды позволяют задать некоторое количество повторений. Это
позволяет выполнять команду заданное количества раз (может быть прервано
нажатие клавиши или событием в игре). Чтобы ввести количество повторений,
нажмите "0", введите число повторений, пробел и собственно команду. Если
число не задано, команда будет выполнена 99 раз. В игре имеются опции (см.
options.txt), позволяющие автоматически повторять большинство полезных
команд (открыть, обезвредить, копать и др.).

Многие команды будут спрашивать дополнительную информацию - направление,
предмет, заклинание, текстовая надпись, символ монстра, другая команда,
подтверждение, время, количество и прочее. Обычно можно нажать Enter,
чтобы выбрать ответ по умолчанию (отображается желтым, если есть), или
Esc, чтобы отменить команду.

Если команда спрашивает заклинание или предмет, нажатие пробела (или "*")
выдает список вариантов. Нажатием "-" (минус) можно выбрать предметы с пола.
Нажатие буквы выбирает предмет или заклинание; нажатие буквы с Shift
дополнительно спрашивает подтверждение. Нажатие цифры выбирает первый
предмет, в надписи на котором есть запись "@#" или "@x#" (где "x" - текущая
команда во внутренней раскладке, "#" - нажатая цифра). Таким образом могут
быть заданы только предметы, разрешенные для этой команды. Например, если вы
надпишете свои стрелы как {@f1}, то при выборе стрелы в команде "f"
достаточно нажать "1" для выбора этих стрел. Надписи "!*" или "!x" ("x" -
текущая команда) спрашивают подтверждение. Например, напитки Исцеления или
свитки Слова Возвращения часто надписывают {!*}, а книги заклинаний -
{!d!k!v} (не бросать, не уничтожать и не швырять без подтверждения).

Многие команды будут спрашивать направление. Направление на одну из восьми
сторон света можно выбрать, нажав соответствующую клавишу. Часто можно также
задать произвольную цель не обязательно в точности по одному направлению.
Для этого нажмите "*". Выбрать уже заданную цель можно по "t" или "5". См.
"Прицеливание".


    Направления оригинальной раскладки  Направления rogue-like раскладки

                 7  8  9                           y  k  u
                 4     6                           h     l
                 1  2  3                           b  j  n


Обе раскладки несколько упрощают использование внутренних команд. В
частности, для ходьбы достаточно нажать клавишу направления; для бега до
препятствия - Shift+клавиша направления (или ".", затем клавиша
направления). Стоять на месте в обоих раскладках можно клавишей "5" -
очевидно, более удобно в оригинальной.


=== Клавиши - оригинальная раскладка (по умолчанию) ===

(Прописная буква означает набор с Shift. Запись ^A означает набор "a" с Ctrl.
Знаки набирайте так же, как и при наборе любого текста - т.е. некоторые,
возможно, с Shift. Все буквы - латинские и набираются в английской раскладке
клавиатуры!)

 a  Направить волшебную палочку          A  Активировать артефакт
 b  Просмотреть книгу                    B  Выбить дверь
 c  Закрыть дверь                        C  Информация о герое
 d  Бросить предмет                      D  Обезвредить ловушку
 e  Экипировка                           E  Съесть еду
 f  Выстрелить предметом                 F  Заправить лампу/факел
 g  Стоять (поднимая вещи)               G  Учить новые заклинания/молитвы
 h  ---                                  H  ---
 i  Инвентарь                            I  Исследовать предмет
 j  Заклинить дверь                      J  ---
 k  Уничтожить предмет                   K  ---
 l  Осматриваться                        L  Просмотр карты
 m  Колдовать заклинание                 M  Полная карта
 n  Повторить предыдущую команду         N  ---
 o  Открыть дверь или сундук             O  ---
 p  Молиться молитву                     P  ---
 q  Выпить напиток                       Q  Выход (самоубийство)
 r  Прочитать свиток                     R  Отдыхать
 s  Искать ловушки/секретные двери       S  Вкл/выкл режим поиска
 t  Снять надетый предмет                T  Копать туннель
 u  Использовать посох                   U  ---
 v  Швырнуть предмет                     V  Версия
 w  Надеть/взять в руки предмет          W  ---
 x  ---                                  X  ---
 y  ---                                  Y  ---
 z  Использовать жезл                    Z  ---
 !  Настройка системы                   ^A  (команда отладки)
 @  Настройка макросов                  ^B  ---
 #  ---                                 ^C  (прерывание)
 $  Настройка интерфейса                ^D  ---
 %  Настройка визуальных определений    ^E  Вкл/выкл окно выбора
 ^  (ввести клавишу с Ctrl)             ^F  Повторить предчувствие
 &  Настройка цветов                    ^G  ---
 *  Прицелиться                         ^H  ---
 (  ---                                 ^I  ---
 )  Сохранить скриншот                  ^J  ---
 {  Надписать предмет                   ^K  ---
 }  Стереть надпись                     ^L  ---
 [  ---                                 ^M  ---
 ]  ---                                 ^N  ---
 -  Идти (поднимая вещи)                ^O  ---
 _  Войти в магазин                     ^P  Предыдущие сообщения
 +  "Изменить" клетку                   ^Q  ---
 =  Опции                               ^R  Перерисовать экран
 ;  Идти (поднимая вещи)                ^S  Сохранить
 :  Заметки в сообщениях                ^T  ---
 '  ---                                 ^U  ---
 "  pref-команда                        ^V  Повторить последнюю команду
 ,  Стоять (поднимая вещь)              ^W  (режим волшебника)
 <  Вверх по лестнице                   ^X  Сохранить и выйти
 .  Бежать                              ^Y  ---
 >  Вниз по лестнице                    ^Z  (режим борга)
 \  (обход карты клавиш)                 |  ---
 `  ---                                  ~  Знания
 /  Опознать символ                      ?  Справка



=== Клавиши - rogue-like раскладка ===

 a  Использовать жезл                    A  Активировать артефакт
 b  (юго-запад)                          B  (юго-запад - бег)
 c  Закрыть дверь                        C  Информация о герое
 d  Бросить предмет                      D  Обезвредить ловушку
 e  Экипировка                           E  Съесть еду
 f  Выбить дверь                         F  Заправить лампу/факел
 g  Стоять (поднимая вещи)               G  Учить новые заклинания/молитвы
 h  (запад)                              H  (запад - бег)
 i  Инвентарь                            I  Исследовать предмет
 j  (юг)                                 J  (юг - бег)
 k  (север)                              K  (север - бег)
 l  (восток)                             L  (восток - бег)
 m  Колдовать заклинание                 M  Полная карта
 n  (юго-восток)                         N  (юго-восток - бег)
 o  Открыть дверь или сундук             O  ---
 p  Молиться молитву                     P  Просмотреть книгу
 q  Выпить напиток                       Q  Выход (самоубийство)
 r  Прочитать свиток                     R  Отдыхать
 s  Искать ловушки/секретные двери       S  Заклинить дверь
 t  Выстрелить предметом                 T  Снять надетый предмет
 u  (северо-восток)                      U  (северо-восток - бег)
 v  Швырнуть предмет                     V  Версия
 w  Надеть/взять в руки предмет          W  Просмотр карты
 x  Осматриваться                        X  ---
 y  (северо-запад)                       Y  (северо-запад - бег)
 z  Направить волшебную палочку          Z  Использовать посох
 !  Настройка системы                   ^A  (команда отладки)
 @  Настройка макросов                  ^B  (юго-запад - действие)
 #  Вкл/выкл режим поиска               ^C  (прерывание)
 $  ---                                 ^D  Уничтожить предмет
 %  Настройка визуальных определений    ^E  Вкл/выкл окно выбора
 ^  (ввести клавишу с Ctrl)             ^F  Повторить предчувствие
 &  Настройка цветов                    ^G  ---
 *  Прицелиться                         ^H  (запад - действие)
 (  ---                                 ^I  ---
 )  Сохранить скриншот                  ^J  (юг - действие)
 {  Надписать предмет                   ^K  (север - действие)
 }  Стереть надпись                     ^L  (восток - действие)
 [  ---                                 ^M  ---
 ]  ---                                 ^N  (юго-восток - действие)
 -  Идти (поднимая вещи)                ^O  ---
 _  Войти в магазин                     ^P  Предыдущие сообщения
 +  "Изменить" клетку                   ^Q  ---
 =  Опции                               ^R  Перерисовать экран
 ;  Идти (поднимая вещи)                ^S  Сохранить
 :  Заметки в сообщениях                ^T  Копать туннель
 '  ---                                 ^U  (северо-восток - действие)
 "  pref-команда                        ^V  Повторить последнюю команду
 ,  Бежать                              ^W  (режим волшебника)
 <  Вверх по лестнице                   ^X  Сохранить и выйти
 .  Стоять                              ^Y  (северо-запад - действие)
 >  Вниз по лестнице                    ^Z  (режим борга)
 \  (обход карты клавиш)                 |  ---
 `  ---                                  ~  Знания
 /  Опознать символ                      ?  Справка


=== Особые клавиши ===
 
Определенные клавиши могут быть перехвачены операционной системой или
терминалом, вызывая неожиданные или нежелательные результаты. Как правило,
это комбинации клавиш с Ctrl.

В частности, если вы играете на UNIX-подобной системе, Ctrl+"C" прервет
Angband. Первое нажатие не имеет эффекта, второе и третье вызовут
предупредительный сигнал, четвертое выдаст сигнал и сообщение с
предупреждением, что пятое нажатие прерывает игру, *уничтожая героя*.
Ctrl+"Z" приостанавливает игру и выходит в оболочку, как и в остальных
UNIX-программах. Вернуться можно командой "fg". Ctrl+"S" в Linux
приостанавливает весь вывод на консоль, зажигая Scroll Lock на клавиатуре.
Восстановить вывод можно нажатием "Scroll Lock". В случае, если вам
необходимо воспользоваться Ctrl+"Z" или Ctrl+"C", введите знак "^" и клавишу
без Ctrl.

Нажатие "\" приостановит обработку через ракладки и карты клавиш; следующая
нажатая клавиша будет воспринята как клавиша внутренней раскладки Angband.
Это может быть полезно в макросах, не зависящих от раскладки.

Клавиши "0", "^" и "\" имеют особое значение, и не будут работать как
команды внутренней раскладки.

Для большинства запросов на ввод, нажатие Esc может прервать команду. Вопрос
типа "[y/n]" предполагает ответ "да" ("y") или "нет" ("n", Esc). На запросы
"-далее-", прочитав часть сообщений, можно ответить нажатием Esc, пробела
или Enter. По умолчанию включена также опция "quick_messages", позволяющая
отвечать на запросы "-далее-" нажатием любой клавиши.


=== Повтор команд ===
 
Некоторые команды могут быть выполнены заданное количество раз, если указать
для них количество повторений. Команда будет выполняться, пока не пройдет
заданное количество повторений, или вы нажмете какую-либо клавишу, или
случается что-то важное (например, атака монстра). Таким образом, повтор
команд не будет работать для повтора атак. Пока команда повторяется,
количество оставшихся повторов отображается в нижней строке.

Чтобы задать количество повторений для команды, введите 0, количество
повторений, и затем команду. Если вы хотите дать команду на движение, и
используете оригинальную раскладук (движение цифрами), нажмите пробел после
ввода количества повторений, и у вас спросят команду отдельно.

Повтор команд очень полезен для занимающих длительное время действий - они
сами прекращаются, когда действие не увенчается успехом, или вас атакуют.
Можно также прервать повтор нажатием любой клавиши. (Введенная клавиша
игнорируется; в принципе, безопаснее всего использовать пробел или Esc, так
как они всегда игнорируются как команды.)
 
Для автоматического повторения 99 раз определенных команд (открыть,
обезвредить, копать и т.п.) можно включить в игре опцию "always_repeat".


=== Выбор предметов === 

Многие команды требуют выбора конкретного предмета. К примеру, команды
прочтения свитка спрашивает, какой из имеющихся у вас свитков вы хотели бы
прочитать. В таких случаях выбор делается нажатием буквы латинского
алфавита. В запросе вам будет представлен диапазон возможных букв.
Нажатием "*" можно показать полный список вариантов. Если вы используете
дополнительные окна для инвентаря, буквы возможного выбора будут подсвечены.
Если вы хотите выбрать предмет из экипировки (если это возможно для данного
действия), нажмите "/" для переключения списков. Нажатие пробела действует
как "*"; второе нажатие отменяет команду и переходит к простому отображению
инвентаря или экипировки, как по команде "i" или "e".

Выбор может быть сделан буквой как в нижнем, так и в верхнем регистре. При
использовании верхнего регистра (с Shift), игра спрашивает дополнительное
подтверждение. Это безопаснее, но требует лишнего нажатия клавиши. См. также
надписи вида "!*" и "!x" ниже.

Часто можно также использовать "-" для выбора предмета с пола, с того места,
где вы стоите. Например, вы можете читать свитки или выпивать напитки прямо
с пола без поднятия.

Если вместо буквы вы вводите цифру от 0 до 9, то будет использован первый
предмет, в надписи которого есть символы "@#", где "#" - цифра. Например,
если у вас есть лопата, надписанная "@0", и вы введете "w", затем цифру "0"
в ответ на запрос, вы смените ваше оружие на лопату. Это полезно, в
частности, для макросов, так как позволяет выбрать предмет независимо от его
положения в рюкзаке. Angband имеет предопреленный макрос на клавише "X"
(Shift+X), делающий такую операцию - "w0". Если вы надпишете и оружие, и
лопату как "@0", то нажатием "X" вы сможете выстро переключаться между ними.
Можно использовать несколько таких обозначений в одной надписи; например,
меч, надписанный как "@0@1" вы можете взять в руки и под "w0", и по "w1".
Если вы используете два оружия, удобно первое надписать как "@1@0", а
второе как "@2@0". Надпись вида "@x#", где "x" - буква какой-либо команды, а
"#" - цифра, действует как "@", но только для команд "x". Например, вы
можете написать "@z4" на жезле и "@u4" на посохе, и использовать первый как
"z4", а второй - как "u4", без риска спутать их.

Надпись, содержащая "!x", где "x" - команда, или "!*" для всех команд,
спрашивает дополнительное подтверждение при выборе предмета. Например,
надпись "!d!k!v" полезна для предметов, которые вы не хотите случайно
потерять - она будет спрашивать подтверждения при бросании (и продаже),
уничтожении и швырянии предмета. "!*" спрашивает подтверждение для всех
команд.


=== Pref-файлы ===

Angband позволяет переопределить некоторые аспекты игры, подстраивая ее под
ваш вкус. Это можно делать с помощью различных меню в самой игре, или ручным
редактированием pref-файлов - файлов с расширением ".prf", находящихся в
каталоге "lib/pref/". Можно определять карты клавиш (позволяет изменить
соответствие клавиш внутренним командам игры), макросы (позволяет
"подвесить" несколько нажатий клавиш на одно), визуальные параметры
(позволяет изменять символы и цвет монстров, предметов и особенностей
ландшафта), цвета (позволяет сделать один из 16 цветов Angband светлее,
темнее или вообще полностью другим), или опции.

Pref-файлы состоят из игнорирующихся машиной комментариев (строки,
начинающиеся с "#"), и команд. Команды - это обычные строки специального
формата. Pref-файл можно загрузить вручную или автоматически; все эти файлы
располагаются в каталоге "lib/pref/". Многие файлы загружаются
автоматически. В этом каталоге всегда находятся файлы "flvr-*.prf",
"font-*.prf", "graf-*.prf", "pref-*.prf", "user-*.prf", "xtra-*.prf".
Изменять их обычно не требуется. На многопользовательских системах может
быть необходимо перезадать этот каталог опцией командной строки "-d",
если игра установлена для нескольких пользователей, желающих пользоваться
разными настройками.

Вы можете при необходимости ввести команду из pref-файла вручную, нажав "
(двойную кавычку). После этого может быть необходимо обновить экран вручную
нажатием Ctrl-R.

Автоматически загружаются следующие файлы:

	- "pref.prf";
	- "font-xxx.prf" ("graf-xxx.prf" для графики);
	- "pref-xxx.prf";
	- "user-xxx.prf";
	- "Раса.prf" (название расы - английское);
	- "Класс.prf" (название класса - английское);
	- "Имя.prf" (имя героя).

Файлы с суффиксом "xxx" обычно загружают, в свою очередь, файл с именем, в
котором "xxx" заменено на обозначение платформы ("gcu" - UNIX/curses,
"x11" - UNIX/X Window, "win" - Windows, "mac" - Macintosh и др.).

Большинство изменяемых pref-файлами параметров можно настраивать в
интерактивном режиме командами "@", "%", "&" и "=". Они также позволяют
автоматически сгенерировать pref-файл на основании текущих настроек. Таким
образом, ручное редактирование обычно не требуется. (Если вы - разработчик,
и вам нужно адаптировать игру к новой платформе, краткая сводка команд
имеется в комментариях файла src/files.c)

